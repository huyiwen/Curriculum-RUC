[TOC]
## 8086各种寄存器
### 通用寄存器
#### 数据寄存器：AX,BX,CX,DX
- AX：累加
- BX：基址
- CX：基数
- DX：数据
#### 指针寄存器：SP,BP
- SP：堆栈指针寄存器
  - 指向**栈顶**
  - `PUSH`: `SP`$--$
  - `POP`: `SP`$++$
- BP：基指针寄存器
  - 一般和SS（堆栈段）配对，**可以指向栈中任意位置**
#### 变址寄存器：SI,DI
- SI：源变址寄存器
- DI：目的变址寄存器
### 控制寄存器：IP,FLAG
- IP：当前执行指令的地址
#### 标志位
- `CF`
  - 无符号数溢出: `CF=1`, 即`CY`
  - `CF=0`, 即`NC`
- `OF`
  - 有符号数溢出: `OF=1`, 即`OV`
  - `OF=0`, 即`NV`
- `ZF`
  - 运算结果为0: `ZF=1`, 即`ZR`
  - `ZF=0`, 即`NZ`
- `SF`
  - 运算结果为负: `SF=1`, 即`NG`
  - `SF=0`, 即`PL`
- `PF`
  - 运算结果中有偶数个1: `PF=1`, 即`PE`
  - `PF=0`, 即`PO`
### 段寄存器：CS,DS,SS,ES
- CS：代码段
- DS：数据段
- SS：堆栈段
- ES：额外段
## 寻址
- CPU指令位数不定，其中包含**操作码（表示进行什么操作）**，以及**操作数（操作涉及到的数据）/ 操作数地址**
### 8086寻址空间
- 计算机内存中的**数据/代码存放在不同的段中**
- **8086默认为20位寻址空间**，而地址仅有16位，因此将**段地址左移一位后加上16位偏移量得到**，这个偏移量称为**有效地址**
  - 操作数一般存放在**数据段DS**中
  - 指令一般存放在**代码段CS**中
- 缺省段地址：**`SI/DI/BX`对应数据段`DS`**，**`BP`对应堆栈段`SS`**

### 8086数据存储
- 低位字节存放低位数据, 比如在$[200],[201]$中存储$1234H$, 则
  $$[200]=34H,[201]=12H$$
### 寻址方式

#### 直接寻址：
  - 操作数的有效地址直接存放在**指令**中
  - 将指令包含的有效地址和对应段地址相加得到物理地址进行访问
#### 间接寻址
  - 操作数的有效地址存放在**寄存器/存储器**中
  - 指令指明对应寄存器，**将寄存器中地址取出后与对应段地址相加，得到物理地址**进行访问
#### 基址寻址 
  - 操作数的有效地址由**基址寄存器和指令地址码相加得到**
  - 将基址寄存器中取出的地址和指令地址码相加, 再和对应段地址相加得到最终物理地址
  - $A[x]$中$A$是基址, 从$BX/某寄存器$中获得, $x$是变址, 由操作码给出
#### 变址寻址
  - 操作数的有效地址由**基址寄存器或指令地址码和变址寄存器相加得到**
  - 将基址寄存器/指令地址码中取出的地址和变址寄存器中地址相加，再和对应段地址相加得到最终物理地址
  - $A[x]$中$A$是基址, 由指令地址码直接给出或者从基址寄存器中取得；$x$是变址, 从变址寄存器中取得
#### 相对寻址
  - 操作数的有效地址由**基址寄存器和偏移量相加得到**
  - 间接访问的基础上，由**指令**提供偏移量，**将寄存器中取出的地址和偏移量相加，再和对应段地址相加，得到物理地址**进行访问
  - $disp$位数不够时注意**补全**, 要补符号位
#### 相对基址变址寻址 
  - 操作数的有效地址由**基址寄存器和变址寄存器和偏移量相加得到**
  - 将基址寄存器中取出的地址和变址寄存器中地址相加，再和偏移量相加，再和对应段地址相加得到最终物理地址。

## 指令
### `XCHG`
- 交换两个操作数
- **两个操作数不能同时为内存单元**
### `XLAT`
- 交换`AL`和`[BX+Al]`
### `ADD`
- 可以字节相加, 可以字相加
- **两个操作数不能同时是内存单元**
- 结果在前面的操作数里
- 会改变溢出标志, 但是计算时忽视`CF`
### `ADC`
- 计算时加上`CF`
### `SUB`
- 结果在前面的操作数里
- 会改变溢出标志, 但是计算时忽视借位`CF`
- 够减:`CF=0`；不够减:`CF=1`；
### `SBB`
- 计算时减去`CF`
### `MUL`
- `MUL BL`
  - `AL`和`BL`中数相乘
  - 结果在`AX`
- `MUL CX`
  - `AX`和`CX`中数相乘
  - 结果高位在`DX`,低位在`AX`
### `IMUL`
- 有符号数相乘
### `DIV`
- `DIV BL`
  - `AX`除以`BL`
  - 商在`AL`,余数在`AH`
- `DIV BX`
  - `DX,AX`除以`BX`
  - 商在`AX`, 余数在`DX`
### `IDIV`
- 有符号数相除
### `DAA`
- 将`AL`中的数转化为`BCD`码
- 会产生进位(**当`AL+6`溢出时**)
### `CMP`
- 若`#1` $>$ `#2`
  - $ZF=0$即`NZ`
- 若`#1` $\leq$ `#2`
  - $ZF=1$即`ZR`
### `AND`,`OR`
- `AND AL,0F`可以实现`SUB AL,30`的效果
- `OR AL,30`可以实现`ADD AL,30`的效果
